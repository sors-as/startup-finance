# Production environment configuration
name = "sors-startup-finance-worker"
main = "src/index.ts"
compatibility_date = "2025-06-20"

preview_urls = true
workers_dev = true

[[routes]]
pattern = "finance.sors.no"
custom_domain = true

# [[migrations]]
# tag = "v4"
# added_classes = ["WorksheetCoordinatorDurableObject"]

[[migrations]]
tag = "v1"	
new_sqlite_classes = [ "WorksheetCoordinatorDurableObject" ]	

# Production Durable Objects configuration
[durable_objects]
bindings = [
  { class_name = "WorksheetCoordinatorDurableObject", name = "WORKSHEET_COORDINATOR" }
]

# Production D1 database configuration
[[d1_databases]]
binding = "DB"
database_name = "startup-finance-worksheets"
database_id = "9c61842d-048e-49fb-9dd4-bc5ebf9ae6e9"

# Static assets
[assets]
directory = "./public"
binding = "ASSETS"

# Enable observability for production
[observability]
enabled = true

# Secrets (set via: wrangler secret put RESEND_API_KEY)
# RESEND_API_KEY - API key for Resend email service
